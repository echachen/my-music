<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>å’Œå¹³ä¹‹ååœ£ä¹åˆ†äº«</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>

<style>
/* ===== é¡µé¢èƒŒæ™¯ ===== */
body{
    margin:0;
    min-height:100vh;
    font-family:'Segoe UI',system-ui,sans-serif;
    background:linear-gradient(-45deg,#36b6d8,#2aa3c8,#e94f8b,#f06292);
    background-size:400% 400%;
    animation:gradient 15s ease infinite;
    display:flex;
    justify-content:center;
    align-items:flex-start;
    padding-top:40px;
}
@keyframes gradient{
    0%{background-position:0% 50%}
    50%{background-position:100% 50%}
    100%{background-position:0% 50%}
}

/* ===== ä¸»å¡ç‰‡ ===== */
.main-card{
    width:95%;
    max-width:520px;
    background:rgba(255,255,255,.08);
    backdrop-filter:blur(14px);
    border-radius:28px;
    padding:26px 18px;
    border:1px solid rgba(255,255,255,.25);
    box-shadow:0 18px 40px rgba(0,0,0,.15);
}

/* ===== æ ‡é¢˜ ===== */
.header{
    text-align:center;
    color:#fff;
    margin-bottom:20px;
}
.header h2{
    margin:0;
    font-weight:400;
    letter-spacing:1px;
    font-size:1.2rem;
}
#status{
    font-size:11px;
    opacity:.65;
    margin-top:6px;
}

/* ===============================
   APlayerï¼šåªåšã€Œå®‰å…¨ç¾åŒ–ã€
   ä¸ç¢°ç»“æ„ / ä¸ç¢°æŒ‰é’®å°ºå¯¸
================================ */

/* æ•´ä½“é€æ˜ */
.aplayer,
.aplayer-info,
.aplayer-controller{
    background:transparent!important;
    border:none!important;
    box-shadow:none!important;
}

/* æ­ŒååŒº */
.aplayer-music{
    text-align:center;
    margin-bottom:-26px!important;
}
.aplayer-title{
    color:#fff!important;
    font-size:1.05rem!important;
}
.aplayer-author{
    color:rgba(255,255,255,.7)!important;
}

/* å›¾æ ‡ */
.aplayer-icon svg{
    fill:#fff!important;
    opacity:.9;
}

/* ===== æ—¶é—´æ˜¾ç¤ºï¼ˆä½ è¦çš„ï¼‰ ===== */
.aplayer-time-inner{
    display:block!important;
    color:rgba(255,255,255,.75)!important;
    font-size:12px!important;
}

/* æ—¶é—´é å³ï¼Œæ›´å¹²å‡€ */
.aplayer-time{
    justify-content:flex-end!important;
}

/* è¿›åº¦æ¡ */
.aplayer-bar{
    background:transparent!important;
    height:3px!important;
}
.aplayer-played{
    background:#e91e63!important;
}

/* åˆ—è¡¨ */
.aplayer-list{
    background:transparent!important;
    margin-top:50px!important;
    border:none!important;
}
.aplayer-list li{
    border:none!important;
    color:rgba(255,255,255,.85)!important;
    font-size:15px!important;
    padding:12px 14px!important;
}
.aplayer-list li:hover{
    background:rgba(255,255,255,.12)!important;
}
.aplayer-list-light{
    background:rgba(255,255,255,.18)!important;
}

/* âš ï¸ æ³¨æ„ï¼šè¿™é‡Œã€æ²¡æœ‰ã€‘ä»»ä½• .aplayer-button çš„ CSS
   æ’­æ”¾æŒ‰é’® = APlayer åŸç”Ÿå¤§æ–¹å—æ ·å¼ */
</style>
</head>

<body>

<div class="main-card">
    <div class="header">
        <h2>ğŸµ å’Œå¹³ä¹‹ååœ£ä¹åˆ†äº«</h2>
        <div id="status">äº‘ç«¯åŒæ­¥ä¸­â€¦</div>
    </div>
    <div id="player"></div>
</div>

<script>
const CONFIG = {
    owner: 'echachen',
    repo: 'my-music',
    artist: 'åœ£ä¹åˆè¾‘',
    cover: 'https://via.placeholder.com/300/ffffff/1a73e8?text=Church+Music'
};

async function initMusicStation(){
    const status = document.getElementById('status');

    try{
        const api = `https://api.github.com/repos/${CONFIG.owner}/${CONFIG.repo}/contents/`;
        const res = await fetch(api);
        if(!res.ok) throw new Error('GitHub API error');

        const files = await res.json();

        const audioList = files
            .filter(f => f.name.toLowerCase().endsWith('.mp3') && f.download_url)
            .map(f => ({
                name: f.name.replace(/\.mp3$/i,''),
                artist: CONFIG.artist,
                url: f.download_url,
                cover: CONFIG.cover
            }));

        if(!audioList.length){
            status.innerText = 'æœªæ‰¾åˆ°å¯æ’­æ”¾çš„åœ£ä¹';
            return;
        }

        const ap = new APlayer({
            container: document.getElementById('player'),
            audio: audioList,
            listFolded: false,
            order: 'list',
            theme: '#e91e63',
            preload: 'metadata'
        });

        /* ç‚¹æ­Œç«‹å³æ’­æ”¾ */
        ap.on('listswitch', () => ap.play());

        status.innerText = `å·²æˆåŠŸåŠ è½½ ${audioList.length} é¦–åœ£ä¹`;

    }catch(e){
        console.error(e);
        status.innerText = 'åŒæ­¥å¤±è´¥';
    }
}

initMusicStation();
</script>

</body>
</html>
